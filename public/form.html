<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargo delivery</title>

    <link rel="stylesheet" href="../public/static/css/blog.css">
	<link rel="stylesheet" href="../public/static/css/header.css">
	<link rel="stylesheet" href="../public/static/css/footer.css">

	<script src="../public/static/js/app.js" defer></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
<body>
	<section class="form-section">
		<div class="breadcrumbs">
			<a href="components.html" class="breadcrumbs-link">–ì–ª–∞–≤–Ω–∞—è</a>
			<span class="breadcrumbs-separator">¬ª</span>
			<span class="current-page">–û–±—Ä–∞—â–µ–Ω–∏—è –≥—Ä–∞–∂–¥–∞–Ω</span>
		</div>
		<div id="modal" class="modal">
			<div class="modal-content">
				<span class="close-button">&times;</span>
				<p id="modal-message"></p>
			</div>
		</div>
		<form class="citizen-form">
			<input type="text" placeholder="–§–ò–û" id="name" class="form-input" required />
			<input type="email" placeholder="E-mail" id="email" class="form-input"  required/>
			<input type="tel" placeholder="+7(952)-664-77-23" id="phone" class="form-input"  required/>
			<textarea placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤–∞—à–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è" id="message" class="form-textarea" required></textarea>
		  	<div class="file-upload">
				<label for="fileInput" class="file-label">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª—ã <span class="file-icon">üìé</span></label>
				<input type="file" id="fileInput" name="files[]" multiple style="display: none;" required />
				<div id="fileList" class="file-list"></div>
		  	</div>
		  	<div class="checkbox-wrapper">
				<input type="checkbox" id="privacy-policy" required/>
				<label class="policy" for="privacy-policy">
				–û—Å—Ç–∞–≤–ª—è—è –∑–∞—è–≤–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏
				<a href="#" class="policy-link">–ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
				</label>
		  	</div>
		  	<button type="submit" class="submit-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
		</form>
	</section>
	<script>
		$(document).ready(function () {
			const modal = $('#modal');
			const modalMessage = $('#modal-message');
			const closeButton = $('.close-button');
			const submitButton = $('.submit-button');
			const form = $('.citizen-form');


			function openModal(message) {
				modalMessage.text(message);
				modal.fadeIn(); 
			}

			function closeModal() {
				modal.fadeOut(); 
			}


  			closeButton.on('click', closeModal);

			$(window).on('click', function (event) {
				if ($(event.target).is(modal)) {
				closeModal();
				}
  			});

			function validateForm() {
				const name = $('#name').val().trim();
				const email = $('#email').val().trim();
				const phone = $('#phone').val().trim();
				const message = $('#message').val().trim();
				const file = $('#privacy-policy').prop('checked');

				if (!name || !email || !phone || !message || !file) {
				return '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!';
				}

				const emailPattern = /^[^@\s]+@[^@\s]+\.[^@\s]+$/;
				if (!emailPattern.test(email)) {
				return '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email!';
				}

				const phonePattern = /^\+7\s?\(\d{3}\)\s?\d{3}-\d{2}-\d{2}$/;
				if (!phonePattern.test(phone)) {
				return '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞! –ê —Ç–∞–∫–∂–µ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª—ã';
				}

    			return '';
  			}

			submitButton.on('click', function () {
				const validationMessage = validateForm();

				if (validationMessage) {
				openModal(validationMessage);
				} else {
				openModal('–§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞!');
				}
  			});
		});
	</script>
</body>
</html>